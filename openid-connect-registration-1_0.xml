<?xml version="1.0" encoding="US-ASCII"?>
<?xml-stylesheet type='text/xsl' href='http://xml.resource.org/authoring/rfc2629.xslt' ?>
<!DOCTYPE rfc PUBLIC "-//IETF//DTD RFC 2629//EN"
"http://xml.resource.org/authoring/rfc2629.dtd">
<rfc category="exp" docName="draft-openid-connect-registration-1_0"
     ipr="trust200902">
  <?rfc toc="yes" ?>

  <?rfc tocdepth="3" ?>

  <?rfc symrefs="yes" ?>

  <?rfc sortrefs="yes"?>

  <?rfc strict="no" ?>

  <?rfc iprnotified="no" ?>

  <?rfc private="Draft" ?>

  <front>
    <title abbrev="OpenID Connect Registration 1.0 draft 07">OpenID Connect
    Dynamic Client Registration 1.0 - draft 07</title>

    <author fullname="Nat Sakimura" initials="N." surname="Sakimura">
      <organization abbrev="NRI">Nomura Research Institute,
      Ltd.</organization>

      <address>
        <email>n-sakimura@nri.co.jp</email>
      </address>
    </author>

    <author fullname="John Bradley" initials="J." role="editor"
            surname="Bradley">
      <organization abbrev="Protiviti">Protiviti Government
      Services</organization>

      <address>
        <email>jbradley@mac.com</email>
      </address>
    </author>

    <author fullname="Michael B. Jones" initials="M.B." surname="Jones">
      <organization abbrev="Microsoft">Microsoft Corporation</organization>

      <address>
        <email>mbj@microsoft.com</email>
      </address>
    </author>

    <date day="30" month="September" year="2011" />

    <abstract>
      <t>OpenID Connect is an identity protocol that provides authentication,
      authorization, and attribute transmission capability. It allows third
      party attested claims from distributed sources. The specification suite
      builds on OAuth 2.0 and consists of Building Blocks (Messages,
      Discovery, Dynamic Client Registration, Session Management, JSON Web
      Token, JSON Web Signature, JSON WEB Encryption, JSON Web Keys, Simple
      Web Discovery), Protocol Bindings (e.g., Standard and Basic Client) and
      Extensions. This specification is the "Dynamic Client Registration" part
      of the suite that defines how clients register with OpenID
      Providers.</t>
    </abstract>

    <note title="Requirements Language">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref
      target="RFC2119">RFC 2119</xref>.</t>
    </note>
  </front>

  <middle>
    <section title="Introduction">
      <t>In order for an OpenID Connect client to utilize OpenID services for
      a user, the client needs to register with the OpenID Provider to acquire
      a client ID and shared secret. This document describes how a new client
      can register with the provider, and how a client already in possession
      of a client_id can retrieve updated registration information.</t>

      <t>The Client Registration endpoint may be co-resident with the token
      endpoint as an optimization in some deployments.</t>
    </section>

    <section anchor="terminology" title="Terminology">
      <t>This specification uses the terms "Access Token", "Refresh Token",
      "Authorization Code", "Authorization Grant", "Authorization Server",
      "Authorization Endpoint", "Client", "Client Identifier", "Client
      Secret", "Protected Resource", "Resource Owner", "Resource Server", and
      "Token Endpoint" that are defined by <xref target="OAuth.2.0">OAuth
      2.0</xref>, and the terminology defined in the <xref
      target="OpenID.Messages">OpenID Connect Messages 1.0</xref>
      specification.</t>
    </section>

    <section title="Discovery">
      <t>OpenID Connect uses the registration_endpoint from the Provider
      Configuration Response <xref target="OpenID.Discovery">Sec
      4.2</xref>.</t>
    </section>

    <section title="Client Registration Endpoint">
      <t>The Client Registration Endpoint returns registration information for
      the client to configure itself for the OpenID Provider.</t>

      <section title="Request">
        <t>Clients MUST send requests encoded as a POST with the following
        parameters added to the HTTP request entity-body using
        "application/x-www-form-urlencoded" format:</t>

        <t><list style="hanging">
            <t hangText="type">REQUIRED. Values <spanx style="verb">client_associate</spanx>,
            <spanx style="verb">client_update</spanx></t>

            <t hangText="client_id">OPTIONAL. Used with <spanx style="verb">client_update</spanx></t>

            <t hangText="client_secret">OPTIONAL. Used with <spanx
            style="verb">client_update</spanx></t>

            <t hangText="contact">OPTIONAL. Space-separated of e-mail
            addresses for people allowed to administer the application.</t>

            <t hangText="application_type">OPTIONAL. <spanx style="verb">native</spanx>
            or <spanx style="verb">web</spanx>.</t>

            <t hangText="application_name">OPTIONAL. Name of the application
            to be presented to the user.</t>

            <t hangText="logo_url">OPTIONAL. URL that a logo for the
            application can be retrieved from.</t>

            <t hangText="redirect_uri">OPTIONAL. Space-separated list of
            redirect URIs</t>

            <t hangText="js_origin_uri">OPTIONAL. Space-separated list of
            JavaScript Origin URIs (used for Post Message flow)</t>

            <t hangText="jwk_url">OPTIONAL. URL for the RP's <xref
            target="JWK">JSON Web Key</xref></t>

            <t hangText="x509_url">OPTIONAL URL for the RP's PEM encoded X.509
            Certificate or Certificate chain.</t>

            <t hangText="sector_identifier">OPTIONAL URL to be used in
            calculating Pseudonymous Identifiers by the OP. The URL contains a
            file with an array of redirect_uri values.</t>
          </list><figure>
            <artwork><![CDATA[POST /connect/register HTTP/1.1
Accept: application/x-www-form-urlencoded
Host: server.example.com

type=client_associate
&redirect_uri=https://client.example.com/callback https://client.example.com/callback2
&logo_url=https://client.example.com/logo.png
]]></artwork>
          </figure></t>
      </section>

      <section title="Response">
        <t>The response is returned as a JSON object with all the parameters
        as top level elements.</t>

        <t><list style="hanging">
            <t hangText="client_id">REQUIRED. The unique client
            identifier.</t>

            <t hangText="client_secret">REQUIRED. The client secret. This
            should change with each response.</t>

            <t hangText="expires_in">REQUIRED. The number of seconds that this
            id and secret are good for or <spanx style="verb">0</spanx> if it
            does not expire.</t>
          </list></t>

        <t>The following is an example response.</t>

        <t><figure>
            <artwork><![CDATA[HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store

     {
       "client_id":"SlAV32hkKG",
       "client_secret":"cf136dc3c1fd9153029bb9c6cc9ecead918bad9887fce6c93f31185e5885805d",
       "expires_in":3600
     }]]></artwork>
          </figure></t>
      </section>
    </section>

    <section anchor="IANA" title="IANA Considerations">
      <t>This document makes no request of IANA.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>Since requests to the client registration endpoint result in the
      transmission of clear-text credentials (in the HTTP request and
      response), the server MUST require the use of a transport-layer security
      mechanism when sending requests to the token endpoint. The server MUST
      support TLS 1.2 as defined in [RFC5246], and MAY support additional
      transport-layer mechanisms meeting its security requirements.</t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?>

      <reference anchor="OpenID.Messages">
        <front>
          <title>OpenID Connect Messages 1.0</title>

          <author fullname="Nat Sakimura" initials="N." surname="Sakimura">
            <organization abbrev="NRI">Nomura Research Institute,
            Ltd.</organization>
          </author>

          <author fullname="David Recordon" initials="D." surname="Recordon">
            <organization abbrev="Facebook">Facebook</organization>
          </author>

          <author fullname="John Bradley" initials="J." surname="Bradley">
            <organization abbrev="Protiviti">Protiviti Government
            Services</organization>
          </author>

          <author fullname="Breno de Medeiros" initials="B."
                  surname="de Medeiros">
            <organization abbrev="Google">Google</organization>
          </author>

          <author fullname="Michael B. Jones" initials="M.B." surname="Jones">
            <organization abbrev="Microsoft">Microsoft
            Corporation</organization>
          </author>

          <author fullname="Edmund Jay" initials="E." surname="Jay">
            <organization abbrev="MGI1">MGI1</organization>
          </author>

          <date day="30" month="September" year="2011" />
        </front>

        <format target="http://openid.net/specs/openid-connect-messages-1_0.html"
                type="HTML" />
      </reference>

      <reference anchor="OpenID.Discovery">
        <front>
          <title>OpenID Connect Discovery 1.0</title>

          <author fullname="Nat Sakimura" initials="N." surname="Sakimura">
            <organization abbrev="NRI">Nomura Research Institute,
            Ltd.</organization>
          </author>

          <author fullname="John Bradley" initials="J." surname="Bradley">
            <organization abbrev="Protiviti">Protiviti Government
            Services</organization>
          </author>

          <author fullname="Michael B. Jones" initials="M.B." surname="Jones">
            <organization abbrev="Microsoft">Microsoft</organization>
          </author>

          <author fullname="Edmund Jay" initials="E." surname="Jay">
            <organization abbrev="MGI1">MGI1</organization>
          </author>

          <date day="30" month="September" year="2011" />
        </front>

        <format target="http://openid.net/specs/openid-connect-discovery-1_0.html"
                type="HTML" />
      </reference>

      <reference anchor="JWK">
        <front>
          <title>JSON Web Key (JWK)</title>

          <author fullname="Michael B. Jones" initials="M.B." surname="Jones">
            <organization abbrev="Microsoft">Microsoft</organization>
          </author>

          <date day="25" month="July" year="2011" />
        </front>

        <format target="http://self-issued.info/docs/draft-jones-json-web-key.html"
                type="HTML" />
      </reference>

      <reference anchor="OAuth.2.0">
        <front>
          <title>OAuth 2.0 Authorization Protocol</title>

          <author fullname="Eran Hammer-Lahav" initials="E." role="editor"
                  surname="Hammer-Lahav">
            <organization abbrev="Yahoo">Yahoo</organization>
          </author>

          <author fullname="David Recordon" initials="D." surname="Recordon">
            <organization abbrev="Facebook">Facebook</organization>
          </author>

          <author fullname="Dick Hardt" initials="D." surname="Hardt">
            <organization abbrev="Microsoft">Microsoft</organization>
          </author>

          <date day="22" month="September" year="2011" />
        </front>

        <format target="http://tools.ietf.org/html/draft-ietf-oauth-v2"
                type="HTML" />
      </reference>
    </references>

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t></t>
    </section>

    <section title="Document History">
      <t>[[ To be removed from the final specification ]]</t>

      <t>-07</t>

      <t><list style="symbols">
          <t>Changed request from posting a JSON object to being HTTP
          Form encoded.</t>

          <t>Added x509_url to support optional encryption.</t>
        </list></t>

      <t>-06 <list style="symbols">
          <t>Changes associated with renaming "Lite" to "Basic Client" and
          replacing "Core" and "Framework" with "Messages" and "Standard".</t>

          <t>Numerous cleanups, including updating references.</t>
        </list></t>

      <t>-05 <list style="symbols">
          <t>Changed <spanx style="verb">redirect_url</spanx> to <spanx
          style="verb">redirect_uri</spanx> and <spanx style="verb">js_origin_url</spanx>
          to <spanx style="verb">js_origin_uri</spanx>.</t>
        </list></t>

      <t>-04 <list style="symbols">
          <t>Correct issues raised by Johnny Bufu and discussed on the
          7-Jul-11 working group call.</t>
        </list></t>

      <t>-03 <list style="symbols">
          <t>Incorporate working group decisions from 5-Jul-11 spec call.</t>

          <t>Consistency and cleanup pass, including removing unused
          references.</t>
        </list></t>

      <t>-02 <list style="symbols">
          <t>Incorporate working group decisions from 23-Jun-11 spec call.</t>
        </list></t>

      <t>-01 <list style="symbols">
          <t>Initial version.</t>
        </list></t>
    </section>
  </back>
</rfc>
